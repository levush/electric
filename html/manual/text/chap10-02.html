<HTML><HEAD><TITLE>Using Electric 10-2: Simulator Operation</TITLE></HEAD>
<BODY BGCOLOR="#FFFFFF">
<!-- PAGE BREAK --><A NAME="chap10-02"></A>

<BR><CENTER><FONT SIZE=6><B>Chapter 10: SIMULATION</B></FONT></CENTER><BR>
<CENTER><TABLE WIDTH="90%" BORDER=0><TR>
<TD><CENTER><A HREF="chap10-01.html#chap10-01"><IMG SRC="../images/iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD>
<TD><CENTER><H2>10-2: Simulator Operation</H2></CENTER></TD>
<TD><CENTER><A HREF="chap10-03.html#chap10-03"><IMG SRC="../images/iconplug.png" ALT="plug" BORDER=0></A></CENTER></TD></TR></TABLE></CENTER>
<HR>
<BR>
To begin simulation of the circuit in the current window,
use the <B>Simulate...</B> subcommand of the <B>Simulation (Built-in)</B> command of the <B>Tools</B> menu.
The simulator already knows about MOS transistors.
The ALS simulator also knows about many digital logic gates and can be programmed to describe any function with the hardware description language described later in this chapter.
<P>
<H3>The Waveform Window</H3>
<P>
When simulation begins, a waveform appears in a new window which is highlighted with a red border.
The circuit that is being simulated is also highlighted with a red border to indicate its association.
Here is a sample waveform window when attached to the built-in ALS simulator:
<P>
<CENTER><IMG SRC="../images/chap10-01.png" ALT="Figure 10.1"></CENTER>
This waveform window is also used to examine the results of batch simulations, such as SPICE and Verilog.
Note that this Verilog output displays busses properly.
Note also that the "explorer" panel (controled by the tree icon in the lower-left corner)
shows signals hierarchically.
<P>
<CENTER><IMG SRC="../images/chap10-07.png" ALT="Figure 10.7"></CENTER>
<P>In the main waveform window, Exports and other network names are listed on the left
(if there are too many, then the slider allows them to be scrolled into view).
The dividing line between signal names and signal values can be grabbed and moved to make room for wider signal names.
You can click over a signal name or the actual waveform to select it for appropriate operations.
Note that when you click on a signal,
the equivalent network in the associated schematic or layout window is also highlighted.
<P>
You can rearrange the order of the signals by dragging their names to their desired location.
You can remove a signal by selecting it and typing the letter "r" (or the DELETE key).
You can add a signal to the list by typing the letter "a" (you will then be prompted for the signal to add).
If you are in the associated layout or schematics window and type "a", then that network is added.
To aggregate a number of signals into a single "bus" signal, select them and type "b"
(to select multiple signals, start in the blank space between signal names and drag vertically over multiple names).
Once a bus signal has been created, its individual signals can be shown or hidden by double-clicking on its name.
All of these rearrangements are remembered with the cell for subsequent simulations.
With the ALS simulator, you can use the <B>Restore Signal Display Order (ALS)</B>
subcommand to reset the waveform display to its original set of signals.
With all simulators, you can use the <B>Remove Signals Saved with Cells</B> subcommand to clear the saved list of rearrangements.
<P>
Two vertical cursors appear in the window, called "main" and "extension"
(the extension cursor has an "x" at the top).
You can click over the cursors and drag them to different time locations.
If one signal is selected, its value is shown at the main and extension times.
<P>
The time axis of the simulation window can be controlled with the appropriate <B>Window</B> menu commands.
Use <B>Zoom Out</B> and <B>Zoom In</B> to scale the time axis by a factor of two.
Use <B>Focus on Highlighted</B> to display the range between the main and extension cursors.
Use the <B>Cursor</B> subcommand of the <B>Center</B> command to shift the time to the location of the cursors.
<P>
The bottom of the waveform window has a set of VCR buttons that control an animation of the time.
The Play rate can be controlled by the "F" and "S" buttons which make it go faster or slower.
In addition, since the waveform window can light-up special "simulation probe" nodes,
the VCR can be used to animate activity on a chip (see the section on "Simulator Control" below for more on this).
<P>
<H3>Test Vectors</H3>
<P>
When a signal name is selected, a test vector can be placed on that signal at the time specified by the main cursor.
Type "l", "h" or "x" to set the signal to low, high,
or undefined (using normal strength, shown in magenta).
For bus signals, type "v" (you will then be prompted for the value to set on that bus).
Prefix the letter with a "w" ("wl", "wh", "wx", and "wv") to set a weaker strength signal (shown in green).
Prefix the letter with an "s" ("sl", "sh", "sx", and "sv") for stronger strength signals (shown in black).
<P>
Another way to control the strength of signals is by setting a transistor's strength.
You can use the <B>Transistor Strength</B> subcommands of the <B>Simulation (Built-in)</B>
command of the <B>Tools</B> window to control a selected transistor.
Note that this must be done before simulation begins.
<P>
To remove the test vectors on the selected signal, type the "e" key.
Use the <B>Clear All Vectors</B> subcommand of the <B>Simulation (Built-in)</B>
command of the <B>Tools</B> menu to erase all test vectors.
Note that these commands do not remove "strong" vectors
(those set with the "sl", "sh", "sx", or "sv" commands).
<P>
Once vectors are established, the <B>Save Vectors to Disk</B> subcommand of the <B>Simulation (Built-in)</B>
command of the <B>Tools</B> menu will write this information to disk.
Use the <B>Restore Vectors from Disk</B> subcommand to read it back.
You can even use the <B>Save Vectors as SPICE commands</B> subcommand to dump this information as a SPICE deck.
<P>
In the ALS simulator, you can also obtain simulation data from an SDF file
(with the <B>SDF</B> subcommand of the <B>Import</B> command of the <B>File</B> menu).
Once this data has been read, one of three sets of values
(<B>Typical</B>, <B>Minimum</B>, or <B>Maximum</B>)
must be selected from the <B>Annotate Delay Data (ALS)</B> subcommand of the <B>Simulate</B> command of the <B>Tools</B> menu.
<P>
<H3>Clocks</H3>
<P>
Besides simple test vectors, the ALS simulator can also set clock patterns on the currently selected signal by typing the letter "c".
The user is then given a dialog for clock specification.
Note that the clock may cycle infinitely,
but Electric generates simulation events to fill only the current waveform window.
If you want more clock events generated,
zoom-out the waveform window before issuing the clock command.
<P>
There are three ways to specify a clock: by frequency, period, or with custom phases.
If the frequency or period method is selected, the only option is the frequency
(in cycles per second) or period (in seconds).
<!-- NEED 3in -->
<TABLE><TR>
<TD><CENTER><IMG SRC="../images/chap10-02.png" ALT="Figure 10.2"></CENTER></TD><TD>
If, however, custom clock specifications are requested,
the entire lower part of the dialog is enabled (as shown on the left) and many options are available.
You can choose the strength of the clock (node, gate, or VDD),
the random distribution of the clock,
and a list of phases that will be repeated a specified number of times
(use 0 repetitions for an infinite clock).
For each phase, select its level (low, high, or undefined) and its duration.
Then use the "Add Phase" button to add it to the list.
Use the "Delete Phase" button to remove a phase.
</TD></TR></TABLE>
<P>
<H3>Simulator Control</H3>
<P>
The simulators uses the hierarchy in the original circuit during simulation.
Therefore, the signals shown are those from the current hierarchical level.
If you use the <B>Down Hierarchy</B> and <B>Up Hierarchy</B> commands of the <B>Cells</B> menu to move through
the hierarchy of the circuit,
the waveform window will change to reflect the displayed circuitry.
<P>
The <B>Simulation Options...</B> subcommand of the <B>Simulation (Built-in)</B> command of the <B>Tools</B>
menu offers control over the simulation process.
Each change that is made to the simulator causes it to resimulate and display the results.
If multiple changes are to be made and the simulation time is long, uncheck the "Resimulate each change" item.
Then you must type "u" when you want to resimulate.
<P>
<TABLE><TR>
<TD><CENTER><IMG SRC="../images/chap09-11.png" ALT="Figure 9.11"></CENTER></TD><TD>
The "Auto advance time"
check tells the simulator to move the time cursor automatically when a new signal is added to the simulation.
</TD></TR></TABLE>
<P>
When simulating, the state of the circuit is displayed both in the waveform window and also on top of arcs
in associated layout or schematics windows.
The colors used can be controlled with choices in the upper-right part of the dialog.
<P>
The "Multistate display"
check tells the simulator to show signals in the layout or schematics window with texturing and color to indicate strength.
Without this, a simple on/off indication is drawn in the layout or schematics window.
Keep in mind that the "Simulation Probe" node of the Generic technology also changes appearance to show simulation activity.
You must connect it (with Universal arcs) to the part of the circuit that you want it to reflect.
The Simulation Probe node is obtained by the <B>Simulation Probe</B> subcommand of the <B>New Special Object</B> command of the <B>Edit</B> menu.
<P>
The "Show waveform window"
check tells the simulator to create a separate window with waveform plots when simulation starts.
When this is unchecked, simulation still runs, but only displays signal information on the schematic or layout.
<P>
You can choose where you want the waveform window to be displayed.
The default, "Cascade", requests that it appears in a new overlapping window.
You can also request that the waveform window "Tile Horizontally" or "Tile Vertically",
which causes the simulated circuit's window to split, showing the waveform in the other half.
<P>
For signals that are aggregated into busses, you can choose the number base for display of values.
<P>
The ALS simulator handles only a fixed number of events before it stops simulating (initially 10,000).
If your circuit or analysis is too long, you will have to increase the number of events.
<P>
The IRSIM simulator only simulates for the range of time that is displayed.
If you zoom out, you may have to modify the test vectors to force it to resimulate for the extra displayed time.
<P>
The IRSIM simulator can handle three levels of parasitic information: "Quick" makes quick estimates of area and perimeter;
"Local" analyzes each level of hierarchy fully but separately;
"Full" analyzes the entire hierarchy, and can take a long time.
In addition, you can specify the ".prm" parameter file that you want IRSIM to use.
<P>
Besides the options offered by the dialog,
there are some additional commands that can be typed to the waveform window.
Use "t" (ALS only) to trace the simulation for the selected signal (and "ft" to dump a full trace of all signals).
Use "i" to display information about the selected signal.
Use "p" to preserve a snapshot of the simulation window in the database
(a cell with the "simulation-snapshot" view is created with artwork components).
To stop simulation, close the simulation window.
<P>

Here is a summary of the single-key commands available in digital simulation windows:
<P>
<CENTER><TABLE BORDER=1>
<TR><TD WIDTH=10%><CENTER><B>Key</B></CENTER></TD><TD WIDTH=90%><CENTER><B>Meaning</B></CENTER></TD></TR>
<TR><TD ALIGN=CENTER>l<BR>wl<BR>sl</TD>
<TD>Set selected signal low at main cursor (gate strength)<BR>
Set selected signal low at main cursor (node strength, weak)<BR>
Set selected signal low at main cursor (VDD/GND strength, strong)</TD></TR>
<TR><TD ALIGN=CENTER>h<BR>wh<BR>sh</TD>
<TD>Set selected signal high at main cursor (gate strength)<BR>
Set selected signal high at main cursor (node strength, weak)<BR>
Set selected signal high at main cursor (VDD/GND strength, strong)</TD></TR>
<TR><TD ALIGN=CENTER>x<BR>wx<BR>sx</TD>
<TD>Set selected signal undefined at main cursor (gate strength)<BR>
Set selected signal undefined at main cursor (node strength, weak)<BR>
Set selected signal undefined at main cursor (VDD/GND strength, strong)</TD></TR>
<TR><TD ALIGN=CENTER>v<BR>wv<BR>sv</TD>
<TD>Set a value on the selected bus signal at main cursor (gate strength)<BR>
Set a value on the selected bus signal at main cursor (node strength, weak)<BR>
Set a value on the selected bus signal at main cursor (VDD/GND strength, strong)</TD></TR>
<TR><TD ALIGN=CENTER>c</TD><TD>Specify a clock on selected signal</TD></TR>
<TR><TD ALIGN=CENTER>e</TD><TD>Delete all vectors on selected signal</TD></TR>
<TR><TD ALIGN=CENTER>i<BR>t<BR>ft</TD>
<TD>Print information about selected signal<BR>
Trace simulation for selected signal (ALS only)<BR>
Trace simulation for all signals (ALS only)</TD></TR>
<TR><TD ALIGN=CENTER>b</TD><TD>Aggregate selected signals into a bus signal</TD></TR>
<TR><TD ALIGN=CENTER>a</TD><TD>Add signal to simulation window</TD></TR>
<TR><TD ALIGN=CENTER>r<BR>DEL</TD><TD>Remove selected signal from simulation window</TD></TR>
<TR><TD ALIGN=CENTER>p</TD><TD>Preserve snapshot of simulation window in database</TD></TR>
<TR><TD ALIGN=CENTER>u</TD><TD>Resimulate and redisplay the waveform information</TD></TR>
<TR><TD ALIGN=CENTER>?</TD><TD>Print this help message</TD></TR>
</TABLE></CENTER>
<P>

These window menu functions apply to the digital simulation windows:
<P>
<UL>
<LI><B>Zoom out</B> (show twice as much time)
<LI><B>Zoom in</B> (show half as much time)
<LI><B>Special Zoom / Focus on Highlighted</B> (show from main to extension cursors)
<LI><B>Left</B> (show earlier time)
<LI><B>Right</B> (show later time)
<LI><B>Center</B>, subcommand <B>Cursor</B> (shift the time to the locations of the time cursors)
</UL>
<P>
<HR>
<CENTER><TABLE BORDER=0><TR>
<TD><A HREF="chap10-01.html#chap10-01"><IMG SRC="../images/iconbackarrow.png" ALT="Prev" BORDER=0></A></TD>
<TD><A HREF="chap10-01.html#chap10-01">Previous</A></TD>
<TD>&nbsp;&nbsp;&nbsp;</TD>
<TD><A HREF="../index.html"><IMG SRC="../images/iconcontarrow.png" ALT="Contents" BORDER=0></A></TD>
<TD><A HREF="../index.html">Table of Contents</A></TD>
<TD>&nbsp;&nbsp;&nbsp;</TD>
<TD><A HREF="chap10-03.html#chap10-03">Next</A></TD>
<TD><A HREF="chap10-03.html#chap10-03"><IMG SRC="../images/iconforearrow.png" ALT="Next" BORDER=0></A></TD>
</TR></TABLE></CENTER>
</BODY>
</HTML>
